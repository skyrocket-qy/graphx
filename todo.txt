dev grpch and batch method
make sure atomic